# グループ最適化プログラム

## この問題について

このプログラムの目的は、クラス内のn人の学生をm（=4）人ずつのグループに分けることです。 学生間の「相性」は1から10の数値で表され、数値が大きいほど「良好な関係」を意味します。

例えば、以下の条件を満たすグループを作成することが目的です：

1. 各グループの人数はmまたはm-1であること。
2. 1人だけの女子または男子のグループは禁止。ただし、3人グループの場合は1人だけの性別の学生を許容する。
3. 「良いグループ分け」の定義：
   - グループ内の「最小相性」が最大になるようにする。
   - 「最小相性」が同じ場合、グループ内の「総相性」が最大になるようにする。

## 仮定

1. 男子の人数は女子より多い。
2. 女子が1人だけのグループを許容しない場合、女子の人数は偶数でなければならない。（女子の人数が奇数の場合は、ダミーの学生を追加してください。）

## 生徒データの準備

以下の形式でファイルを作成してください：

### 例：

--- Start ---

```
16
0 1 0
1 1 0
2 1 0
3 1 0
4 1 0
5 1 1
...
0 0 0
```

--- End ---

### ファイルの説明

- 1行目：学生の総数 `n`
- 次のn行：学生ID、性別、転校生ステータス
  - 性別 (`0`: 男子, `1`: 女子)
  - 編入生 (`0`: 一般生徒, `1`: 編入生)
- その後の行：
  - `a b x` の形式
  - `a` と `b` は生徒のID, `x` は関係性の数値
- 最終行は `0 0 0` で終了

## プログラムの実行

Windows上で `grouping_ils.exe` を実行する方法を説明します。 以下の例では、学生情報が `data16.txt` に保存されていると仮定します。

1. 実行ファイル `grouping_ils.exe` とテキストファイル `data16.txt` を同じフォルダに配置します。 例として、これらのファイルを `C:\Users\user\Desktop\Group` フォルダに配置するとします。

2. コマンドプロンプトを開きます。

3. 作業ディレクトリを `Group` フォルダに変更します。

   ```
   C:\Users\user> cd Desktop\Group
   ```

4. 実行ファイル `grouping_ils.exe` をデータファイルとともに実行します。

   ```
   C:\Users\user\Desktop\Group> grouping_ils.exe data16.txt > result16.csv
   ```

   実行時間を指定するには、`-t` オプションを使用してください。 指定がない場合、デフォルトの実行時間は120秒です。

   例えば、計算を10秒で停止し、結果を出力する場合：

   ```
   % ./grouping_ils -t 10 data16.txt
   ```

5. 数分後、結果が `result16.csv` に書き出されます。

## 出力例

```
0,4,7H,10,13,14,7 6 9 9 8 4 ,41.0,43,40,4,1,
1,4,1g,4g,6H,9,6 7 9 9 10 8 ,49.0,49,62,2,1,
2,4,0g,5gH,8,15,6 5 6 4 8 4 ,29.0,33,42,2,1,
3,4,2g,3g,11,12,8 4 6 6 10 8 ,40.0,42,42,2,0,
Total Value = 159.0
Minimum Compatibility = 4
Total Compatibility = 167
```

### 出力フォーマット（左から順に）：

- グループ番号
- グループの人数 (`m`)
- グループ内の学生番号 (`g`: 女子, `H`: 編入生)
- グループ内の相性リスト
- グループ評価値（最小相性を考慮した値）
- グループの総相性値
- グループ内の最小相性値
- 女子の数
- 男子の数
- 編入生の数
